(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,r,o,i){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"_handleDeleteCard",(function(){s._element.remove(),s._element=null})),t(this,"_handlePressLike",(function(){s._like.classList.toggle("element__icon_active")})),this._selector=e,this._link=o,this._name=r,this._handleClickCard=i}var r,o;return r=n,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._like=this._element.querySelector(".element__icon"),this._element.querySelector(".element__image").src=this._link,this._element.querySelector(".element__heading").textContent=this._name,this._element.querySelector(".element__remove").addEventListener("click",this._handleDeleteCard),this._like.addEventListener("click",this._handlePressLike),this._element.querySelector(".element__image").addEventListener("click",(function(){e._handleClickCard(e._link,e._name)})),this._element}}])&&e(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_checkIfInputValid",(function(e){e.validity.valid?r._hideError(e):r._showError(e,e.validationMessage)})),o(this,"disabledButton",(function(){r._submitButton.classList.add("popup__button_disabled"),r._submitButton.disabled=!0})),o(this,"_showError",(function(e,t){var n=r._form.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(r._errorMessageClass),e.classList.add(r._inputErrorClass)})),o(this,"_hideError",(function(e,t){var n=r._form.querySelector("#".concat(e.id,"-error"));n.textContent="",n.classList.remove(r._errorMessageClass),e.classList.remove(r._inputErrorClass)})),o(this,"_hasInvalidInput",(function(){return r._inputs.some((function(e){return!e.validity.valid}))})),o(this,"_toggleButtonError",(function(){r._hasInvalidInput()?(r._submitButton.classList.add(r._inactiveButtonClass),r._submitButton.disabled=!0):(r._submitButton.classList.remove(r._inactiveButtonClass),r._submitButton.disabled=!1)})),o(this,"enableValidation",(function(){r._setInputListeners()})),this._form=n,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=this._form.querySelectorAll(this._inputSelector),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputs=Array.from(this._inputList)}var t,n;return t=e,(n=[{key:"_setInputListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkIfInputValid(t),e._toggleButtonError()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonError(),this._inputList.forEach((function(t){e._hideError(t)}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=document.querySelector(".popup_edit"),u=document.querySelector(".profile__edit-button"),l=s.querySelector("#close-edit"),a=document.querySelector(".profile__name"),c=document.querySelector(".profile__about"),d=document.querySelector("#name"),p=document.querySelector("#career"),_=document.querySelector("#submit-add"),m=document.querySelector(".popup_image"),h=document.querySelector(".popup__image-url"),f=document.querySelector(".popup__image-name"),v=m.querySelector("#close-photo"),y=(document.querySelectorAll(".popup"),document.querySelector("popup_opened"),document.querySelector(".elements"));function b(e){e.classList.add("popup_opened"),document.addEventListener("keydown",x),e.addEventListener("mousedown",I)}function k(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",x),e.removeEventListener("mousedown",I)}u.addEventListener("click",(function(){b(s),d.value=a.innerText,p.value=c.innerText})),l.addEventListener("click",(function(){return k(s)})),document.querySelector("#edit").addEventListener("submit",(function(e){e.preventDefault(),a.textContent=d.value,c.textContent=p.value,k(s)}));var S=document.querySelector(".elements");function g(e,t){h.src=e,h.alt=e,f.textContent=t,b(m)}function E(e){return new n(".template",e.name,e.link,g).generateCard()}document.querySelector(".template"),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){y.append(E(e))}));var q=document.querySelector(".popup_new"),L=document.querySelector(".profile__add-button"),C=document.querySelector("#close-add");L.addEventListener("click",(function(){return b(q)}),_.classList.add("popup__button_disabled"),_.disabled=!0),C.addEventListener("click",(function(){return k(q)}));var B=document.getElementById("title"),w=document.getElementById("popup-link");function x(e){"Escape"===e.key&&k(document.querySelector(".popup_opened"))}function I(e){var t=document.querySelector(".popup_opened");e.target===t&&k(t)}document.getElementById("new").addEventListener("submit",(function(e){e.preventDefault();var t={name:B.value,link:w.value};E(t),S.prepend(E(t)),e.target.reset(),k(q),V.disabledButton()})),v.addEventListener("click",(function(){return k(m)}));var j={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},P=new i(j,s),V=new i(j,q);P.enableValidation(),P.resetValidation(),V.enableValidation(),console.log("Hello, World!")})();